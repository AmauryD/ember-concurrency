<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>ember-concurrency</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    
<meta name="dummy/config/environment" content="%7B%22modulePrefix%22%3A%22dummy%22%2C%22environment%22%3A%22production%22%2C%22rootURL%22%3A%22%2F%22%2C%22locationType%22%3A%22auto%22%2C%22EmberENV%22%3A%7B%22FEATURES%22%3A%7B%7D%2C%22EXTEND_PROTOTYPES%22%3A%7B%22Date%22%3Afalse%7D%2C%22_APPLICATION_TEMPLATE_WRAPPER%22%3Afalse%2C%22_DEFAULT_ASYNC_OBSERVERS%22%3Atrue%2C%22_JQUERY_INTEGRATION%22%3Atrue%2C%22_TEMPLATE_ONLY_GLIMMER_COMPONENTS%22%3Atrue%7D%2C%22APP%22%3A%7B%22name%22%3A%22ember-concurrency%22%2C%22version%22%3A%222.0.0%2B5be155e1%22%7D%2C%22fastboot%22%3A%7B%22hostWhitelist%22%3A%5B%7B%7D%2C%22ember-concurrency.com%22%5D%7D%2C%22exportApplicationGlobal%22%3Afalse%7D" />
<!-- EMBER_CLI_FASTBOOT_TITLE -->

    <link integrity="" rel="stylesheet" href="/assets/vendor-e754b247f0b14ad5fde0f302404dd7cb.css">
    <link integrity="" rel="stylesheet" href="/assets/dummy-7531a7ac8fca261643d73af00e241483.css">
    <link href='//fonts.googleapis.com/css?family=Raleway:400,300,600' rel='stylesheet' type='text/css'>

    
  </head>
  <body>
    <script type="x/boundary" id="fastboot-body-start"></script><div class="container navbar">
  <div class="row">
    <div class="ten columns">
      <h3 style="float:left;">
        ember-concurrency

        <span style="font-size: 0.5em;">
          (v 2.0.0)
        </span>
      </h3>
    </div>
    <div class="one columns">
      <div class="nav-bar-link-outer">
        <a href="/api">API</a>
      </div>
    </div>
    <div class="one columns">
      <div class="nav-bar-link-outer">
        <a href="https://github.com/machty/ember-concurrency" target="_blank" rel="noopener noreferrer">GitHub</a>
      </div>
    </div>
  </div>
</div>

<div class="container">
  <div class="docs row">
    <div class="three columns">
      <div class="side-menu">
            <div class="toc-entry">
                <a href="/docs/introduction" id="ember348" class="ember-view">Home</a>
            </div>


<!---->            <div class="toc-entry">
                <a href="/docs/installation" id="ember349" class="ember-view">Installation</a>
            </div>


<!---->            <div class="toc-section-title">
              Introduction
            </div>
            <div class="toc-entry">
                <a href="/docs/tutorial" id="ember350" class="ember-view">Writing Code Without Tasks</a>
            </div>


<!---->            <div class="toc-entry">
                <a href="/docs/tutorial/discussion" id="ember351" class="ember-view">Post-Mortem</a>
            </div>


<!---->            <div class="toc-entry">
                <a href="/docs/tutorial/refactor" id="ember352" class="ember-view">Refactoring With Tasks</a>
            </div>


<!---->            <div class="toc-section-title">
              Reference
            </div>
            <div class="toc-entry">
                <a href="/docs/task-function-syntax" id="ember353" class="ember-view">Task Function Syntax</a>
            </div>


                <div class="toc-entry toc-subentry">
                  <a href="/docs/task-decorators" id="ember354" class="active ember-view">Decorators</a>
                </div>
                <div class="toc-entry toc-subentry">
                  <a href="/docs/typescript" id="ember355" class="ember-view">TypeScript</a>
                </div>
            <div class="toc-entry">
                <a href="/docs/task-concurrency" id="ember356" class="ember-view">Managing Task Concurrency</a>
            </div>


                <div class="toc-entry toc-subentry">
                  <a href="/docs/task-concurrency-advanced" id="ember357" class="ember-view">Advanced</a>
                </div>
            <div class="toc-entry">
                <a href="/docs/cancelation" id="ember358" class="ember-view">Cancelation</a>
            </div>


<!---->            <div class="toc-entry">
                <a href="/docs/error-vs-cancelation" id="ember359" class="ember-view">Handling Errors</a>
            </div>


<!---->            <div class="toc-entry">
                <a href="/docs/child-tasks" id="ember360" class="ember-view">Child Tasks</a>
            </div>


<!---->            <div class="toc-entry">
                <a href="/docs/task-groups" id="ember361" class="ember-view">Task Groups</a>
            </div>


<!---->            <div class="toc-entry">
                <a href="/docs/derived-state" id="ember362" class="ember-view">Derived State</a>
            </div>


<!---->            <div class="toc-entry">
                <a href="/docs/encapsulated-task" id="ember363" class="ember-view">Encapsulated Tasks</a>
            </div>


<!---->            <div class="toc-entry">
                <a href="/docs/events" id="ember364" class="ember-view">Awaiting Events / Conditions</a>
            </div>


<!---->            <div class="toc-entry">
                <a href="/docs/task-lifecycle-events" id="ember365" class="ember-view">Lifecycle Events</a>
            </div>


<!---->            <div class="toc-entry">
                <a href="/docs/testing-debugging" id="ember366" class="ember-view">Testing &amp; Debugging</a>
            </div>


<!---->            <div class="toc-entry">
                <a href="/docs/faq" id="ember367" class="ember-view">FAQ &amp; Fact Sheet</a>
            </div>


<!---->            <div class="toc-section-title">
              Examples
            </div>
            <div class="toc-entry">
                <a href="/docs/examples/loading-ui" id="ember368" class="ember-view">Loading UI</a>
            </div>


<!---->            <div class="toc-entry">
                <a href="/docs/examples/autocomplete" id="ember369" class="ember-view">Type-Ahead Search</a>
            </div>


<!---->            <div class="toc-entry">
                <a href="/docs/examples/increment-buttons" id="ember370" class="ember-view">Accelerating Increment Buttons</a>
            </div>


<!---->            <div class="toc-entry">
                <a href="/docs/examples/ajax-throttling" id="ember371" class="ember-view">AJAX Throttling</a>
            </div>


<!---->            <div class="toc-entry">
                <a href="/docs/examples/route-tasks" id="ember372" class="ember-view">Route Tasks</a>
            </div>


<!---->            <div class="toc-entry">
                <a href="/docs/examples/joining-tasks" id="ember373" class="ember-view">Awaiting Multiple Child Tasks</a>
            </div>


<!---->      </div>
    </div>
    <div class="nine columns">
      <div class="row">
    <p class="u-pull-left">
      Previous: <a href="/docs/task-function-syntax" id="ember374" class="ember-view">Task Function Syntax</a>
    </p>

    <p class="u-pull-right">
      Next: <a href="/docs/typescript" id="ember375" class="ember-view">TypeScript</a>
    </p>
</div>

      <a title="Edit on Github" href="https://github.com/machty/ember-concurrency/edit/master/tests/dummy/app/docs/task-decorators/template.hbs" id="ember376" class="github-edit ember-view"><i class="icon-pencil"></i>
</a>

      <h2>Using Task Decorators</h2>

<p>
  Since 2.0.0, ember-concurrency uses the <a href="https://github.com/tc39/proposal-decorators" rel="noreferrer noopener">Stage 1 proposed decorator syntax</a>
  for declaring/configuring ember-concurrency tasks on native
  JavaScript/TypeScript classes. This syntax was previously provided by the
  <a href="https://github.com/machty/ember-concurrency-decorators">ember-concurrency-decorators</a>
  addon, but was merged into ember-concurrency. It is still available as a seperate
  addon for use with ember-concurrency 1.x and earlier, or when supporting both
  ember-concurrency v1 and v2 in an addon using decorators.
</p>

<p>
  For more context on decorators and Ember, you can read an excellent briefing on
  decorator syntax in modern Ember here:
  <a href="https://www.pzuraq.com/coming-soon-in-ember-octane-part-1-native-classes/" rel="noreferrer noopener">Coming soon in Ember Octane (Part 1): Native Classes</a>
</p>

<h3 id="available-decorators">Available decorators</h3>

<ul>
  <li>
    <strong><a href="#task"><code>@task</code></a></strong>:
    turns a generator method into a task

    <ul>
      <li><code>@restartableTask</code></li>
      <li><code>@dropTask</code></li>
      <li><code>@keepLatestTask</code></li>
      <li><code>@enqueueTask</code></li>
    </ul>
  </li>

  <li>
    <strong><a href="#task-group"><code>@taskGroup</code></a></strong>:
    creates a task group from a property

    <ul>
      <li><code>@restartableTaskGroup</code></li>
      <li><code>@dropTaskGroup</code></li>
      <li><code>@keepLatestTaskGroup</code></li>
      <li><code>@enqueueTaskGroup</code></li>
    </ul>
  </li>

  <li>
    <strong><a href="#last-value"><code>@lastValue</code></a></strong>:
    alias a property to the result of a task with an optional default value
  </li>
</ul>

<h4 id="task"><code>@task</code></h4>

<pre id="ember377" class="javascript ember-view">import Component from '@ember/component';
import { task } from 'ember-concurrency';

export default class ExampleComponent extends Component {
  @task
  *doStuff() {
    // ...
  }

  // and then elsewhere
  executeTheTask() {
    // `doStuff` is still a `Task` object that can be `.perform()`ed
    this.doStuff.perform();
    console.log(this.doStuff.isRunning);
  }
}
</pre>

<p>You can also pass further options to the task decorator:</p>

<pre id="ember378" class="javascript ember-view">@task({
  maxConcurrency: 3,
  restartable: true
})
*doStuff() {
  // ...
}
</pre>

<p>You can also use task lifecycle event hooks in your tasks:</p>

<pre id="ember379" class="javascript ember-view">@task({ on: 'didInsertElement' })
*doStuff() {
  // ...
}
</pre>

<p>
  For your convenience, there are extra decorators for all
  <a href="/docs/task-concurrency" id="ember380" class="ember-view">concurrency modifiers</a>:
</p>

<table>
  <thead>
    <tr>
      <th>Shorthand</th>
      <th>Equivalent</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>@restartableTask</code></td>
      <td><code>@task({ restartable: true })</code></td>
    </tr>
    <tr>
      <td><code>@dropTask</code></td>
      <td><code>@task({ drop: true })</code></td>
    </tr>
    <tr>
      <td><code>@keepLatestTask</code></td>
      <td><code>@task({ keepLatest: true })</code></td>
    </tr>
    <tr>
      <td><code>@enqueueTask</code></td>
      <td><code>@task({ enqueue: true })</code></td>
    </tr>
  </tbody>
</table>

<p>You can still pass further options to these decorators, like:</p>

<pre id="ember381" class="javascript ember-view">@restartableTask({ maxConcurrency: 3 })
*doStuff() {
  // ...
}
</pre>

<h5>Encapsulated Tasks</h5>

<blockquote>
  <a href="/docs/encapsulated-task" id="ember382" class="ember-view">Encapsulated Tasks</a> behave just
  like regular tasks, but with one crucial difference: the value of <code>this</code>
  within the task function points to the currently running TaskInstance, rather
  than the host object that the task lives on (e.g. a Component, Controller, etc).
  This allows for some nice patterns where all of the state produced/mutated by a
  task can be contained (encapsulated) within the Task itself, rather than having
  to live on the host object.
</blockquote>

<pre id="ember383" class="javascript ember-view">import Component from '@ember/component';
import { task } from 'ember-concurrency';

export default class ExampleComponent extends Component {
  @task
  doStuff = {
    privateState: 123,
    *perform() {
      // ...
    }
  };

  // and then elsewhere
  executeTheTask() {
    // `doStuff` is still a `Task` object that can be `.perform()`ed
    this.doStuff.perform();
    console.log(this.doStuff.isRunning);
  }
}
</pre>

<p>
  Unfortunately, encapsulated tasks have challenges with TypeScript.
  See the <a href="#typescript-support">TypeScript</a> section for more details.
</p>

<h4 id="task-group"><code>@taskGroup</code></h4>

<pre id="ember384" class="javascript ember-view">import Component from '@ember/component';
import { task, taskGroup } from 'ember-concurrency';

export default class ExampleComponent extends Component {
  @taskGroup
  someTaskGroup;

  @task({ group: 'someTaskGroup' })
  *doStuff() {
    // ...
  }

  @task({ group: 'someTaskGroup' })
  *doOtherStuff() {
    // ...
  }

  // and then elsewhere
  executeTheTask() {
    // `doStuff` is still a `Task `object that can be `.perform()`ed
    this.doStuff.perform();

    // `someTaskGroup` is still a `TaskGroup` object
    console.log(this.someTaskGroup.isRunning);
  }
}
</pre>

<p>You can also pass further options to the task group decorator:</p>

<pre id="ember385" class="javascript ember-view">@taskGroup({
  maxConcurrency: 3,
  drop: true
}) someTaskGroup;
</pre>

<p>
  As for <code>@task</code>, there are extra decorators for all
  <a href="/docs/task-concurrency" id="ember386" class="ember-view">concurrency modifiers</a>:
</p>

<table>
  <thead>
    <tr>
      <th>Shorthand</th>
      <th>Equivalent</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>@restartableTaskGroup</code></td>
      <td><code>@taskGroup({ restartable: true })</code></td>
    </tr>
    <tr>
      <td><code>@dropTaskGroup</code></td>
      <td><code>@taskGroup({ drop: true })</code></td>
    </tr>
    <tr>
      <td><code>@keepLatestTaskGroup</code></td>
      <td><code>@taskGroup({ keepLatest: true })</code></td>
    </tr>
    <tr>
      <td><code>@enqueueTaskGroup</code></td>
      <td><code>@taskGroup({ enqueue: true })</code></td>
    </tr>
  </tbody>
</table>

<p>You can still pass further options to these decorators, like:</p>

<pre id="ember387" class="javascript ember-view">@dropTaskGroup({ maxConcurrency: 3 }) someTaskGroup;
</pre>

<h4 id="last-value"><code>@lastValue</code></h4>

<p>
  This decorator allows you to alias a property to the result of a task.
  You can also provide a default value to use before the task has completed.
</p>

<pre id="ember388" class="javascript ember-view">import Component from '@ember/component';
import { task } from 'ember-concurrency';
import { lastValue } from 'ember-concurrency';

export default class ExampleComponent extends Component {
  @task
  *someTask() {
    // ...
  }

  @lastValue('someTask')
  someTaskValue;

  @lastValue('someTask')
  someTaskValueWithDefault = 'A default value';
}
</pre>

<h2 id="typescript-support">TypeScript Support</h2>

<p>
  You can use this package with TypeScript, <em>but</em> unfortunately decorators
  cannot yet change the type signature of the decorated element. This is why you
  may get type errors like:
</p>

<pre id="ember389" class="typescript ember-view">import { task } from 'ember-concurrency';

export default class Foo {
  @task
  *doStuff(this: Foo) {
    // ...
  }

  executeTheTask() {
    // @ts-ignore
    this.doStuff.perform();
  }
}
</pre>

<pre>error TS2339: Property 'perform' does not exist on type '(this: Foo) =&gt; Generator:&lt;never, void, unknown&gt;'.
</pre>

<p>
  See the <a href="/docs/typescript" id="ember390" class="ember-view">documentation on TypeScript</a>
  for details and workarounds.
</p>


      <br> <br> <br> <br>

      <div class="row">
    <p class="u-pull-left">
      Previous: <a href="/docs/task-function-syntax" id="ember391" class="ember-view">Task Function Syntax</a>
    </p>

    <p class="u-pull-right">
      Next: <a href="/docs/typescript" id="ember392" class="ember-view">TypeScript</a>
    </p>
</div>

    </div>
  </div>
</div>


<div id="ember393" class="ember-notify-cn ember-notify-default ember-view"><!----></div>
<script type="x/boundary" id="fastboot-body-end"></script>

    <script src="/assets/vendor-837a9bb2198479b906aec0f3105565d4.js"></script>
    <script src="/assets/dummy-2547396e77499aeaa84c1cfdba0cfd87.js"></script>

    
  </body>
</html>
